<html t:type="layout" title="Confirm your booking"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">

    ${finalMessage}
    <t:if test="pageReady">
        <table style="width:100%;">
            <tr>
                <td class="testtd" style="width:60%;" valign="top">
                    <form t:type="form" t:id="confirmForm">
                        <table style="width:100%;">

                            <!-- Title -->
                            <tr>
                                <td class="testtd">
                                    <label>Please confirm your booking and fill out the information.</label>
                                </td>
                            </tr>
                            <!-- Errors -->
                            <tr>
                                <td class="testtd">
                                    <t:errors/>
                                </td>
                            </tr>

                            <!-- Passengers area -->
                            <tr>
                                <td>
                                    <label>Passengers</label>
                                    <!-- Must loop and add every passenger -->
                                    <t:loop source="passengers" value="passenger" encoder="passengerValueEncoder" index="passengerIndex">

                                        <table style="width:100%;" valign="middle">
                                            <tr>
                                                <td rowspan="2" class="testtd" style="width:10%;" valign="middle" align="middle">
                                                    <!-- passenger title (adult,child,inf) -->
                                                    ${passengerId}
                                                </td>
                                                <!-- name/s (as in passport) -->
                                                <td class="testtd" style="width:12%;" align="right">
                                                    <label t:type="label" t:for="passengerName">First name &nbsp;</label>
                                                </td>
                                                <td class="testtd" style="width:32%;">
                                                    <t:textfield t:id="passengerName" t:value="passenger.name" size="24" t:validate="required"/>
                                                </td>
                                                <!-- last name (as in passport) -->
                                                <td class="testtd" style="width:12%;" align="right">
                                                    <label t:type="label" t:for="passengerName">Last name &nbsp;</label>
                                                </td>
                                                <td class="testtd" style="width:32%;">
                                                    <t:textfield t:id="lastName" t:value="passenger.lastName" size="16" t:validate="required"/>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td class="testtd" align="right">
                                                    <label t:type="label" t:for="birthDay">Birth date &nbsp;</label>
                                                </td>
                                                <td class="testtd">
                                                    <!-- birth date -->

                                                    <t:select t:id="birthDay" model="literal:day"/>
                                                    <t:select t:id="birthMonth" model="literal:month"/>
                                                    <t:select t:id="birthYear" model="literal:year"/>
                                                </td>
                                                <td class="testtd" align="right">
                                                    <label t:type="label" t:for="gender">Gender &nbsp;</label>
                                                </td>
                                                <td class="testtd">
                                                    <!-- gender -->
                                                    <t:select t:id="gender" model="literal:Female,Male"/>
                                                </td>
                                            </tr>

                                        </table>

                                    </t:loop>
                                </td>
                            </tr>

                            <!-- Payment options -->
                            <tr>
                                <td class="testtd">
                                    <label>Payment options</label>
                                    <table style="width:100%;">
                                        <!-- loop payment options -->
                                        <t:radiogroup t:id="paymentRadios" value="paymentRadioSelectedValue">
                                            <t:loop source="paymentOptions" value="paymentOption" encoder="paymentValueEncoder" index="paymentIndex">
                                                <tr>
                                                    <td class="testtd" valign="middle">
                                                        <!-- payment radio and label -->
                                                        <t:radio
                                                                id="radio_${paymentIndex}"
                                                                value="paymentRadio"/>
                                                        <label>${paymentDescription}</label>
                                                    </td>
                                                    <td class="testtd">
                                                        <!-- payment icons and description -->

                                                    </td>
                                                </tr>
                                            </t:loop>
                                        </t:radiogroup>
                                    </table>

                                    <label>Card details</label>
                                    <table style="width:100%;">
                                        <tr>
                                            <!-- Drop down card type -->
                                            <td class="testtd" align="right">
                                                <label t:type="label" t:for="cardType">Card type &nbsp;</label>
                                            </td>
                                            <td class="testtd">
                                                <t:select t:id="cardType" model="literal:Mastercard,Visa"/>
                                            </td>
                                            <!-- Card expire date -->
                                            <td class="testtd" align="right">
                                                <label t:type="label" t:for="expireMonth">Expire date &nbsp;</label>
                                            </td>
                                            <td class="testtd">
                                                <t:select t:id="expireMonth" model="literal:Red,Green,Blue"/>
                                                <t:select t:id="expireYear" model="literal:Red,Green,Blue"/>

                                            </td>
                                        </tr>

                                        <tr>
                                            <!-- Card number -->
                                            <td class="testtd" align="right">
                                                <label t:type="label" t:for="cardNumber">Card number &nbsp;</label>
                                            </td>
                                            <td class="testtd">
                                                <t:textfield t:id="cardNumber" t:value="cardNumber" size="24" t:validate="required"/>
                                            </td>
                                            <!-- security ocde -->
                                            <td class="testtd" align="right">
                                                <label t:type="label" t:for="cardCode">Card code &nbsp;</label>
                                            </td>
                                            <td class="testtd">
                                                <t:textfield t:id="cardCode" t:value="cardCode" size="6" t:validate="required"/>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td class="testtd" align="right">
                                                <label t:type="label" t:for="cardOwner">Card owner &nbsp;</label>
                                            </td>
                                            <td class="testtd" >
                                                <!-- name of card owner -->
                                                <t:textfield t:id="cardOwner" t:value="cardOwner" size="24" t:validate="required"/>
                                            </td>
                                        </tr>
                                    </table>

                                </td>
                            </tr>

                            <!-- Contact information -->
                            <tr>
                                <td class="testtd">
                                    <label>Contact informtion</label>
                                    <table style="width:100%;">
                                        <tr>
                                            <!-- Email -->
                                            <td class="testtd" align="right" style="width:110px">
                                                <label t:type="label" t:for="email">Email &nbsp;</label>
                                            </td>
                                            <td class="testtd">
                                                <t:textfield t:id="email" t:value="email" size="16" t:validate="required,email"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="testtd" align="right" style="width:110px">
                                                <label t:type="label" t:for="confirmEmail">Confirm email &nbsp;</label>
                                            </td>
                                            <td class="testtd">
                                                <!-- Confirm email -->
                                                <t:textfield t:id="confirmEmail" t:value="confirmEmail" size="16" t:validate="required,email"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="testtd" align="right" style="width:110px">
                                                <label t:type="label" t:for="phone">Phone number &nbsp;</label>
                                            </td>
                                            <td class="testtd" colspan="2">
                                                <!-- Phone -->
                                                <t:textfield t:id="phone" t:value="phone" size="16" t:validate="required"/>
                                            </td>
                                        </tr>
                                    </table>

                                </td>
                            </tr>

                            <!-- Pay and agree terms -->
                            <tr>
                                <td class="testtd">
                                    <label>Confirm purchase</label>
                                    <table style="width:100%;">
                                        <tr>
                                            <td class="testtd">
                                                <!-- I agree checkbox -->
                                                <t:checkbox t:id="agreeTerms" value="agreeTerms"/>
                                                &nbsp;
                                                <label t:type="label" t:for="agreeTerms">I agree to the terms and conditions</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="testtd">
                                                <!-- confirm purchase -->
                                                <input type="submit" t:type="submit" value="Confirm"
                                                       t:id="confirmPurchase" t:event="confirmPurchase"/>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    </form>
                </td>

                <td class="testtd" style="width:40%;" valign="top">
                    <table style="width:100%;">
                        <tr>
                            <td class="testtd">
                                <!-- Price information -->
                                <table>
                                    <tr>
                                        <td>
                                            <!-- Adult quantity -->
                                        </td>
                                        <td>
                                            <!-- total adult price -->
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <!-- Children quantity -->
                                        </td>
                                        <td>
                                            <!-- total children price -->
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <!-- infant quantity -->
                                        </td>
                                        <td>
                                            <!-- total infant price -->
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                            <!-- taxes label -->
                                        </td>
                                        <td>
                                            <!-- taxes -->
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <!-- charges label -->
                                        </td>
                                        <td>
                                            <!-- charges -->
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <!-- total label -->
                                        </td>
                                        <td>
                                            <!-- total -->
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td class="testtd">
                                <!-- Itinerary information -->
                                <table style="width:100%;">
                                    <tr>
                                        <td class="roundedbox">


                                                <table class="combobox">
                                                    <tr>
                                                        <td class="outdiv">
                                                            <table class="blueflightchooser">
                                                                <tr>
                                                                    <td>
                                                                        <table style="width:100%;">
                                                                            <tr>

                                                                                <td style="width:5%;">
                                                                                    <img src="${request.contextPath}/layout/images/going.png"/>
                                                                                </td>
                                                                                <td style="width:95%;">
                                                                                    <label class="routelabel">Outbound
                                                                                        ${flightOutLabelDesc}
                                                                                    </label>
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                            </table>

                                                                    <table style="width:100%;">
                                                                        <tr>
                                                                            <td>

                                                                                <table style="width:100%;">
                                                                                    <tr>

                                                                                        <td class="rounded4">
                                                                                            <table style="width:100%;">
                                                                                                <tr>
                                                                                                    <td>
                                                                                                        <table style="width:100%;">
                                                                                                            <tr>
                                                                                                                <th style="width:10%;">
                                                                                                                    <label>
                                                                                                                        Schedule
                                                                                                                    </label>
                                                                                                                </th>
                                                                                                                <td class="rounded5">
                                                                                                                    ${outRouteScheduleInfo}
                                                                                                                    <br/>
                                                                                                                </td>
                                                                                                            </tr>


                                                                                                            <tr>
                                                                                                                <th style="width:10%;">
                                                                                                                    <label>
                                                                                                                        Segments
                                                                                                                    </label>
                                                                                                                </th>
                                                                                                                <td class="rounded5">

                                                                                                                    <table>
                                                                                                                        <tr>
                                                                                                                            <td style="text-align:right"
                                                                                                                                valign="bottom">
                                                                                                                                ${outRouteSegmentNumber}
                                                                                                                            </td>
                                                                                                                            <td>
                                                                                                                                &nbsp;</td>
                                                                                                                            <td>
                                                                                                                                <t:loop source="outRouteSegmentInfo"
                                                                                                                                        value="outSegmentInfo"
                                                                                                                                        index="outRouteSegmentInfoIndex">
                                                                                                                                    ${outSegmentInfo}
                                                                                                                                    <t:if test="outContinueRenderingArrow">
                                                                                                                                        <img src="${request.contextPath}/layout/images/arrowright.png"/>
                                                                                                                                    </t:if>
                                                                                                                                </t:loop>
                                                                                                                            </td>

                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td colspan="3">
                                                                                                                                <center>
                                                                                                                                    <a href="#outwindow0"
                                                                                                                                       onclick="Windows.windows[0].showCenter();">
                                                                                                                                        Show
                                                                                                                                        more
                                                                                                                                        details
                                                                                                                                    </a>
                                                                                                                                </center>
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                    </table>
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        </table>
                                                                                                    </td>
                                                                                                </tr>

                                                                                            </table>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td>

                                                                                            <div t:id="outboundWindow">
                                                                                                <!--${staticOutWindowNumber}-->

                                                                                                <div class="rounded4"
                                                                                                     style="width:97%;">
                                                                                                    <t:loop source="outSegments"
                                                                                                            value="outSegment"
                                                                                                            encoder="outSegmentsValueEncoder"
                                                                                                            index="outSegmentWindowIndex">
                                                                                                        <center>
                                                                                                            <b>
                                                                                                                <br/>
                                                                                                                ${outSegmentWindowDescription}
                                                                                                            </b>
                                                                                                        </center>
                                                                                                        <table class="rounded4">

                                                                                                            <tr>
                                                                                                                <th style="width:10%;">
                                                                                                                    <label>
                                                                                                                        Departure
                                                                                                                    </label>
                                                                                                                </th>
                                                                                                                <td class="rounded5">
                                                                                                                    <table>
                                                                                                                        <tr>
                                                                                                                            <td>
                                                                                                                                &nbsp;${outSegmentLeaveInfo}
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td>
                                                                                                                                &nbsp;${outSegmentLeaveHourInfo}
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                    </table>

                                                                                                                </td>
                                                                                                            </tr>


                                                                                                            <t:if test="outSegmentHasStops">
                                                                                                                <tr>
                                                                                                                    <th style="width:10%;">
                                                                                                                        <label>
                                                                                                                            Stops
                                                                                                                        </label>
                                                                                                                    </th>
                                                                                                                    <td class="rounded5">
                                                                                                                        &nbsp;${outSegmentStopInfo}
                                                                                                                    </td>
                                                                                                                </tr>
                                                                                                            </t:if>

                                                                                                            <tr>
                                                                                                                <th style="width:10%;">
                                                                                                                    <label>
                                                                                                                        Arrival
                                                                                                                    </label>
                                                                                                                </th>
                                                                                                                <td class="rounded5">
                                                                                                                    <table>
                                                                                                                        <tr>
                                                                                                                            <td>
                                                                                                                                &nbsp;${outSegmentArriveInfo}
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                        <tr>
                                                                                                                            <td>
                                                                                                                                &nbsp;${outSegmentArriveHourInfo}
                                                                                                                            </td>
                                                                                                                        </tr>
                                                                                                                    </table>

                                                                                                                </td>
                                                                                                            </tr>

                                                                                                            <tr>
                                                                                                                <th style="width:10%;">
                                                                                                                    <label>
                                                                                                                        Duration
                                                                                                                    </label>
                                                                                                                </th>
                                                                                                                <td class="rounded5">
                                                                                                                    &nbsp;${outSegmentDurationInfo}
                                                                                                                    <br/>
                                                                                                                </td>
                                                                                                            </tr>

                                                                                                        </table>
                                                                                                        <t:if test="isThereNextOutSegment">
                                                                                                            <table class="rounded4">
                                                                                                                <tr>

                                                                                                                    <td class="rounded5">
                                                                                                                        <center>

                                                                                                                            ${outSegmentWaitDesc}
                                                                                                                        </center>

                                                                                                                    </td>
                                                                                                                </tr>
                                                                                                            </table>
                                                                                                        </t:if>
                                                                                                    </t:loop>

                                                                                                    <table class="rounded4">
                                                                                                        <tr>
                                                                                                            <th style="width:50%;"
                                                                                                                align="right">
                                                                                                                <label>Total
                                                                                                                    duration:
                                                                                                                </label>
                                                                                                            </th>
                                                                                                            <td>
                                                                                                                ${outRouteDurationInfo}
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                    </table>

                                                                                                    <center>
                                                                                                        <t:actionlink
                                                                                                                t:id="outviewmap"
                                                                                                                context="OutRouteSegmentInfoCommas"
                                                                                                                target="_blank">
                                                                                                            View outbound
                                                                                                            route in a map
                                                                                                        </t:actionlink>
                                                                                                    </center>
                                                                                                </div>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                            </td>
                                                                        </tr>
                                                                    </table>

                                                        </td>
                                                    </tr>

                                                    <t:if test="IsFlightRound">
                                                        <tr>
                                                            <td class="indiv">

                                                                <table class="redflightchooser">
                                                                    <tr>
                                                                        <td>
                                                                            <table style="width:100%;">
                                                                                <tr>

                                                                                    <td style="width:5%;">
                                                                                        <img src="${request.contextPath}/layout/images/returning.png"/>
                                                                                    </td>
                                                                                    <td style="width:95%;">
                                                                                        <label class="routelabel">Inbound
                                                                                            ${flightInLabelDesc}
                                                                                        </label>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                    </tr>
                                                                </table>


                                                                        <table style="width:100%;">
                                                                            <tr>
                                                                                <td>
                                                                                    <table style="width:100%;">
                                                                                        <tr>

                                                                                            <td class="rounded4">
                                                                                                <table style="width:100%;">
                                                                                                    <tr>
                                                                                                        <th style="width:10%;">
                                                                                                            <label>Schedule
                                                                                                            </label>
                                                                                                        </th>
                                                                                                        <td class="rounded5">
                                                                                                            ${inRouteScheduleInfo}
                                                                                                            <br/>
                                                                                                        </td>
                                                                                                    </tr>


                                                                                                    <tr>
                                                                                                        <th style="width:10%;">
                                                                                                            <label>Segments
                                                                                                            </label>
                                                                                                        </th>
                                                                                                        <td class="rounded5">
                                                                                                            <center>

                                                                                                            </center>
                                                                                                            <table>
                                                                                                                <tr>
                                                                                                                    <td style="text-align:right"
                                                                                                                        valign="bottom">
                                                                                                                        ${inRouteSegmentNumber}
                                                                                                                    </td>
                                                                                                                    <td>
                                                                                                                        &nbsp;</td>
                                                                                                                    <td>
                                                                                                                        <t:loop source="inRouteSegmentInfo"
                                                                                                                                value="inSegmentInfo"
                                                                                                                                index="inRouteSegmentInfoIndex">
                                                                                                                            ${inSegmentInfo}
                                                                                                                            <t:if test="inContinueRenderingArrow">
                                                                                                                                <img src="${request.contextPath}/layout/images/arrowright.png"/>
                                                                                                                            </t:if>
                                                                                                                        </t:loop>
                                                                                                                    </td>

                                                                                                                </tr>
                                                                                                                <tr>
                                                                                                                    <td colspan="3">
                                                                                                                        <center>
                                                                                                                            <a href="#inwindow0"
                                                                                                                               onclick="Windows.windows[1].showCenter();">
                                                                                                                                Show
                                                                                                                                more
                                                                                                                                details
                                                                                                                            </a>
                                                                                                                        </center>
                                                                                                                    </td>
                                                                                                                </tr>
                                                                                                            </table>

                                                                                                        </td>
                                                                                                    </tr>
                                                                                                </table>

                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr>
                                                                                            <td>
                                                                                                <div t:id="inboundWindow">
                                                                                                    <!--${staticOutWindowNumber}-->

                                                                                                    <div class="rounded4"
                                                                                                         style="width:97%;">
                                                                                                        <t:loop source="inSegments"
                                                                                                                value="inSegment"
                                                                                                                encoder="inSegmentsValueEncoder"
                                                                                                                index="inSegmentWindowIndex">
                                                                                                            <center>
                                                                                                                <b>
                                                                                                                    <br/>
                                                                                                                    ${inSegmentWindowDescription}
                                                                                                                </b>
                                                                                                            </center>
                                                                                                            <table class="rounded4">

                                                                                                                <tr>
                                                                                                                    <th style="width:10%;">
                                                                                                                        <label>
                                                                                                                            Leaves
                                                                                                                        </label>
                                                                                                                    </th>
                                                                                                                    <td class="rounded5">
                                                                                                                        <table>
                                                                                                                            <tr>
                                                                                                                                <td>
                                                                                                                                    &nbsp;${inSegmentLeaveInfo}
                                                                                                                                </td>
                                                                                                                            </tr>
                                                                                                                            <tr>
                                                                                                                                <td>
                                                                                                                                    &nbsp;${inSegmentLeaveHourInfo}
                                                                                                                                </td>
                                                                                                                            </tr>
                                                                                                                        </table>

                                                                                                                    </td>
                                                                                                                </tr>

                                                                                                                <t:if test="outSegmentHasStops">
                                                                                                                    <tr>
                                                                                                                        <th style="width:10%;">
                                                                                                                            <label>
                                                                                                                                Stops
                                                                                                                            </label>
                                                                                                                        </th>
                                                                                                                        <td class="rounded5">
                                                                                                                            ${inSegmentStopInfo}
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                </t:if>

                                                                                                                <tr>
                                                                                                                    <th style="width:10%;">
                                                                                                                        <label>
                                                                                                                            Arrives
                                                                                                                        </label>
                                                                                                                    </th>
                                                                                                                    <td class="rounded5">
                                                                                                                        <table>
                                                                                                                            <tr>
                                                                                                                                <td>
                                                                                                                                    &nbsp;${inSegmentArriveInfo}
                                                                                                                                </td>
                                                                                                                            </tr>
                                                                                                                            <tr>
                                                                                                                                <td>
                                                                                                                                    &nbsp;${inSegmentArriveHourInfo}
                                                                                                                                </td>
                                                                                                                            </tr>
                                                                                                                        </table>

                                                                                                                    </td>
                                                                                                                </tr>

                                                                                                                <tr>
                                                                                                                    <th style="width:10%;">
                                                                                                                        <label>
                                                                                                                            Duration
                                                                                                                        </label>
                                                                                                                    </th>
                                                                                                                    <td class="rounded5">
                                                                                                                        &nbsp;${inSegmentDurationInfo}
                                                                                                                        <br/>
                                                                                                                    </td>
                                                                                                                </tr>

                                                                                                            </table>
                                                                                                            <t:if test="isThereNextInSegment">
                                                                                                                <table class="rounded4">
                                                                                                                    <tr>

                                                                                                                        <td class="rounded5">
                                                                                                                            <center>

                                                                                                                                ${inSegmentWaitDesc}
                                                                                                                            </center>

                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                </table>
                                                                                                            </t:if>
                                                                                                        </t:loop>

                                                                                                        <table class="rounded4">
                                                                                                            <tr>
                                                                                                                <th style="width:50%;"
                                                                                                                    align="right">
                                                                                                                    <label>
                                                                                                                        Total
                                                                                                                        duration:
                                                                                                                    </label>
                                                                                                                </th>
                                                                                                                <td>
                                                                                                                    ${inRouteDurationInfo}
                                                                                                                </td>
                                                                                                            </tr>
                                                                                                        </table>

                                                                                                        <center>
                                                                                                            <br/>
                                                                                                            <t:actionlink
                                                                                                                    t:id="inviewmap"
                                                                                                                    context="inRouteSegmentInfoCommas"
                                                                                                                    target="_blank">
                                                                                                                View inbound
                                                                                                                route in a
                                                                                                                map
                                                                                                            </t:actionlink>
                                                                                                        </center>
                                                                                                    </div>

                                                                                                </div>

                                                                                            </td>
                                                                                        </tr>
                                                                                    </table>
                                                                                </td>
                                                                            </tr>
                                                                        </table>

                                                            </td>
                                                        </tr>
                                                    </t:if>

                                                </table>



                                        </td>
                                    </tr>

                                </table>
                            </td>
                        </tr>
                    </table>

                </td>
            </tr>
        </table>
        <p:else>
            <p>To confirm a booking, you must first make a search on the
                <t:pagelink page="SearchPage">search page.</t:pagelink>
            </p>
        </p:else>
    </t:if>

</html>