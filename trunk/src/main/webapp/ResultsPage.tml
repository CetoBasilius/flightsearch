<html t:type="layout" title="Search results"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">
    <t:if test="search">
        <table class="full">
            <tr>
                <td colspan="3" class="showtd">
                    <table class="full" style="width:100%">
                        <tr>
                            <td class="rounded4">
                                ${searchDescription}
                            </td>
                        </tr>
                        <tr>
                            <td class="rounded4">
                                ${resultDescription}
                            </td>
                        </tr>
                        <tr>
                            <td class="rounded4" id="non-printable">
                                ${filterDescription}
                            </td>
                        </tr>
                        <tr>
                            <td >
                                ${boughtItem}
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td valign="top" id="non-printable" style="width:20%;" class="showtd">
                    <t:if test="!emptyResult">
                        <div style="height:32px;"/>
                        <form t:type="form" t:id="filterForm">

                            <table style="width:100%;" class="roundedbox">
                                <tr>
                                    <td class="roundedbox">
                                        <center>Filter Results</center>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="showtd">

                                        <table style="width:100%;" class="rounded4">
                                            <tr>
                                                <td class="showtd">
                                                    <center>Price</center>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td  class="resultfilterslider">

                                                    <t:slider value="slider" id="slider" t:min="minPriceFilter" t:max="maxPriceFilter" t:steps="priceFilterSteps"
                                                              t:customHandleCSS="customHandleCSS" t:customTrackCSS="customTrackCSS" t:customValueCSS="customValueCSS"/>
                                                </td>
                                            </tr>

                                        </table>

                                    </td>
                                </tr>
                                <tr>
                                    <td class="showtd">

                                        <table style="width:100%;" class="rounded4">
                                            <tr>
                                                <td class="showtd">
                                                    <center>Duration</center>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td>
                                                    <table>
                                                        <t:radiogroup t:id="durationFilterRadios" value="durationFilterRadioSelectedValue">

                                                            <tr>
                                                                <td>
                                                                    <t:radio t:id="radioAllDurations" value="radioAllDurations" style="cursor:pointer;"/>
                                                                    <t:label for="radioAllDurations">Any duration</t:label>
                                                                </td>
                                                            </tr>

                                                        </t:radiogroup>
                                                    </table>

                                                </td>
                                            </tr>

                                        </table>

                                    </td>
                                </tr>
                                <tr>
                                    <td class="showtd">

                                        <table style="width:100%;" class="rounded4">
                                            <tr>
                                                <td class="showtd">
                                                    <center>Segments</center>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td>
                                                    <table>
                                                        <t:radiogroup t:id="segmentFilterRadios" value="segmentFilterRadioSelectedValue">
                                                            <tr>
                                                                <td>
                                                                    <t:radio t:id="radioDirect" value="radioDirect" style="cursor:pointer;"/>
                                                                    <t:label for="radioDirect">Direct flights</t:label>
                                                                </td>

                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    <t:radio t:id="radio1segment" value="radio1segment" style="cursor:pointer;"/>
                                                                    <t:label for="radio1segment">One segment</t:label>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    <t:radio t:id="radio2segmentMore" value="radio2segmentMore" style="cursor:pointer;"/>
                                                                    <t:label for="radio2segmentMore">Two or more segments</t:label>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    <t:radio t:id="radioAllSegments" value="radioAllSegments" style="cursor:pointer;"/>
                                                                    <t:label for="radioAllSegments">Any segments</t:label>
                                                                </td>
                                                            </tr>

                                                        </t:radiogroup>
                                                    </table>

                                                </td>
                                            </tr>

                                        </table>

                                    </td>
                                </tr>
                                <tr>
                                    <td class="showtd">

                                        <table style="width:100%;" class="rounded4">
                                            <tr>
                                                <td class="showtd">
                                                    <center>Type</center>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td>

                                                    <t:radiogroup t:id="typeFilterRadios" value="typeFilterRadioSelectedValue">

                                                        <tr>
                                                            <td>
                                                                <t:radio t:id="radioAllTypes" value="radioAllTypes" style="cursor:pointer;"/>
                                                                <t:label for="radioAllTypes">Any Type</t:label>
                                                            </td>
                                                        </tr>

                                                    </t:radiogroup>
                                                </td>
                                            </tr>

                                        </table>

                                    </td>
                                </tr>
                                <tr>
                                    <td class="showtd">
                                        <center>
                                            <input type="submit" t:type="submit" value="Filter results" t:id="applyfilter" t:event="applyfilter"/>&nbsp;
                                            <input type="submit" t:type="submit" value="Disable filter" t:id="disablefilter" t:event="disablefilter"/>
                                        </center>
                                    </td>

                                </tr>
                            </table>
                        </form>
                    </t:if>
                </td>

                <td valign="top" style="width:50%;" class="showtd">
                    <form t:type="form" t:id="errorForm">
                        <t:errors/>
                    </form>


                    <div t:id="customPagedLoop" source="flights" value="flight" rowsPerPage="rowsPerPage" index="flightIndex" pagerPosition="both" style="color: #222;">

                        <t:if test="!emptyResult">
                            <table style="width:100%;">
                                <tr>
                                    <td class="${IsOnPriceRangeCSS}">
                                        <form t:type="form" t:id="buyForm">
                                            <t:errors/>
                                            <!--${flightDescription}<br/> -->
                                            <t:if test="!isOnPriceRangeBoolean">
                                                <center>
                                                    <label class="outofrangelabel">This flight is out of your ${BudgetDollarsString} dollar budget!</label>
                                                </center>
                                            </t:if>
                                            <t:radiogroup t:id="outBoundRadios" value="outRadioSelectedValue">
                                                <t:loop source="outRoutes" value="outboundRoute" index="outBoundIndex" encoder="outboundRoutesValueEncoder">

                                                    <table style="width:100%;">
                                                        <tr>
                                                            <td class="goingbox">
                                                                <table>
                                                                    <tr>
                                                                        <td>
                                                                            <table class="blueflightchooser">
                                                                                <tr>
                                                                                    <td>
                                                                                        <t:radio id="radio_${outBoundIndex}" value="outboundRouteShort" style="cursor:pointer;"/>
                                                                                    </td>
                                                                                    <td>
                                                                                        <center>
                                                                                            <img src="${request.contextPath}/layout/images/going.png" />
                                                                                        </center>
                                                                                    </td>
                                                                                    <td>
                                                                                        <label class="routelabel">Going</label>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                        <td valign="middle">
                                                                            <!-- some sort of tittle can go here -->
                                                                        </td>
                                                                    </tr>
                                                                </table>

                                                                <table style="width:100%;">
                                                                    <tr>
                                                                        <td class="rounded4">
                                                                            <table style="width:100%;">
                                                                                <tr>
                                                                                    <th style="width:10%;">
                                                                                        <label>Schedule</label>
                                                                                    </th>
                                                                                    <td class="rounded5">
                                                                                        ${outRouteScheduleInfo}<br/>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <th style="width:10%;">
                                                                                        <label>Duration</label>
                                                                                    </th>
                                                                                    <td class="rounded5">
                                                                                        ${outRouteDurationInfo}<br/>
                                                                                    </td>
                                                                                </tr>

                                                                                <tr>
                                                                                    <th style="width:10%;">
                                                                                        <label>Type</label>
                                                                                    </th>
                                                                                    <td class="rounded5">
                                                                                        ${outRouteType}<br/>
                                                                                    </td>
                                                                                </tr>

                                                                                <tr>
                                                                                    <th style="width:10%;">
                                                                                        <label>Leaves</label>
                                                                                    </th>
                                                                                    <td class="rounded5">
                                                                                        ${outRouteLeaveInfo}<br/>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <th style="width:10%;">
                                                                                        <label>Arrives</label>
                                                                                    </th>
                                                                                    <td class="rounded5">
                                                                                        ${outRouteArriveInfo}<br/>
                                                                                    </td>
                                                                                </tr>

                                                                                <tr>
                                                                                    <th style="width:10%;">
                                                                                        <label>Segments</label>
                                                                                    </th>
                                                                                    <td class="rounded5">
                                                                                        <table style="width:100%;">
                                                                                            <tr>
                                                                                                <td style="text-align:right">
                                                                                                    ${outRouteSegmentNumber}<br/>
                                                                                                </td>
                                                                                                <td>&nbsp;</td>
                                                                                                <td>
                                                                                                    <t:loop source="outRouteSegmentInfo" value="outSegmentInfo" index="outRouteSegmentInfoIndex">
                                                                                                        ${outSegmentInfo}
                                                                                                        <t:if test="outContinueRenderingArrow">
                                                                                                            <img src="${request.contextPath}/layout/images/arrowright.png" />
                                                                                                        </t:if>
                                                                                                    </t:loop>
                                                                                                </td>
                                                                                            </tr>
                                                                                        </table>
                                                                                        <center>
                                                                                            <a href="#outwindow${staticOutWindowNumber}" onclick="Windows.windows[${outWindowNumber}].showCenter();">Show more details</a>
                                                                                        </center>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>

                                                                            <div t:id="outboundWindow">
                                                                                <!--${staticOutWindowNumber}-->

                                                                                <div class="rounded4" style="width:97%;">
                                                                                    <t:loop source="outSegments" value="outSegment" encoder="outSegmentsValueEncoder" index="outSegmentWindowIndex">
                                                                                        <center><b><br/>${outSegmentWindowDescription}</b></center>
                                                                                        <table class="rounded4">

                                                                                            <tr>
                                                                                                <th style="width:10%;">
                                                                                                    <label>Departure</label>
                                                                                                </th>
                                                                                                <td class="rounded5">
                                                                                                    <table>
                                                                                                        <tr>
                                                                                                            <td>
                                                                                                                &nbsp;${outSegmentLeaveInfo}
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                        <tr>
                                                                                                            <td>
                                                                                                                &nbsp;${outSegmentLeaveHourInfo}
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                    </table>

                                                                                                </td>
                                                                                            </tr>


                                                                                            <t:if test="outSegmentHasStops">
                                                                                                <tr>
                                                                                                    <th style="width:10%;">
                                                                                                        <label>Stops</label>
                                                                                                    </th>
                                                                                                    <td class="rounded5">
                                                                                                        &nbsp;${outSegmentStopInfo}
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </t:if>

                                                                                            <tr>
                                                                                                <th style="width:10%;">
                                                                                                    <label>Arrival</label>
                                                                                                </th>
                                                                                                <td class="rounded5">
                                                                                                    <table>
                                                                                                        <tr>
                                                                                                            <td>
                                                                                                                &nbsp;${outSegmentArriveInfo}
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                        <tr>
                                                                                                            <td>
                                                                                                                &nbsp;${outSegmentArriveHourInfo}
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                    </table>

                                                                                                </td>
                                                                                            </tr>

                                                                                            <tr>
                                                                                                <th style="width:10%;">
                                                                                                    <label>Duration</label>
                                                                                                </th>
                                                                                                <td class="rounded5">
                                                                                                    &nbsp;${outSegmentDurationInfo}<br/>
                                                                                                </td>
                                                                                            </tr>

                                                                                        </table>
                                                                                        <t:if test="isThereNextOutSegment">
                                                                                            <table class="rounded4">
                                                                                                <tr>

                                                                                                    <td class="rounded5">
                                                                                                        <center>

                                                                                                            ${outSegmentWaitDesc}
                                                                                                        </center>

                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </t:if>
                                                                                    </t:loop>

                                                                                    <table class="rounded4">
                                                                                        <tr>
                                                                                            <th style="width:50%;" align="right">
                                                                                                <label>Total duration:</label>
                                                                                            </th>
                                                                                            <td>
                                                                                                ${outRouteDurationInfo}
                                                                                            </td>
                                                                                        </tr>
                                                                                    </table>

                                                                                    <center>
                                                                                        <t:actionlink t:id="outviewmap" context="OutRouteSegmentInfoCommas" target="_blank">View outbound route in a map</t:actionlink>
                                                                                    </center>
                                                                                </div>


                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                                <!--<t:actionlink t:id="viewDepart" context="flight.id">Visualize departure</t:actionlink><br/>
                                                                -->
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </t:loop>
                                            </t:radiogroup>

                                            <t:radiogroup t:id="inBoundRadios" value="inRadioSelectedValue">
                                                <t:loop source="inRoutes" value="inboundRoute" index="inBoundIndex" encoder="inboundRoutesValueEncoder">
                                                    <table style="width:100%;">
                                                        <tr>
                                                            <td class="returningbox">
                                                                <table class="redflightchooser">
                                                                    <tr>
                                                                        <td>
                                                                            <t:radio id="radio_${inBoundIndex}" value="inboundRouteShort" style="cursor:pointer;"/>
                                                                        </td>
                                                                        <td>
                                                                            <center>
                                                                                <img src="${request.contextPath}/layout/images/returning.png" />
                                                                            </center>
                                                                        </td>
                                                                        <td>
                                                                            <label class="routelabel">Returning</label>
                                                                        </td>
                                                                    </tr>
                                                                </table>

                                                                <table style="width:100%;">
                                                                    <tr>
                                                                        <td class="rounded4">
                                                                            <table style="width:100%;">
                                                                                <tr>
                                                                                    <th style="width:10%;">
                                                                                        <label>Schedule</label>
                                                                                    </th>
                                                                                    <td class="rounded5">
                                                                                        ${inRouteScheduleInfo}<br/>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <th style="width:10%;">
                                                                                        <label>Duration</label>
                                                                                    </th>
                                                                                    <td class="rounded5">
                                                                                        ${inRouteDurationInfo}<br/>
                                                                                    </td>
                                                                                </tr>

                                                                                <tr>
                                                                                    <th style="width:10%;">
                                                                                        <label>Type</label>
                                                                                    </th>
                                                                                    <td class="rounded5">
                                                                                        ${inRouteType}<br/>
                                                                                    </td>
                                                                                </tr>

                                                                                <tr>
                                                                                    <th style="width:10%;">
                                                                                        <label>Leaves</label>
                                                                                    </th>
                                                                                    <td class="rounded5">
                                                                                        ${inRouteLeaveInfo}<br/>
                                                                                    </td>
                                                                                </tr>

                                                                                <tr>
                                                                                    <th style="width:10%;">
                                                                                        <label>Arrives</label>
                                                                                    </th>
                                                                                    <td class="rounded5">
                                                                                        ${inRouteArriveInfo}<br/>
                                                                                    </td>
                                                                                </tr>

                                                                                <tr>
                                                                                    <th style="width:10%;">
                                                                                        <label>Segments</label>
                                                                                    </th>
                                                                                    <td class="rounded5">
                                                                                        <table style="width:100%;">
                                                                                            <tr>
                                                                                                <td style="text-align:right;">
                                                                                                    ${inRouteSegmentNumber}
                                                                                                </td>
                                                                                                <td>&nbsp;</td>
                                                                                                <td>

                                                                                                    <t:loop source="inRouteSegmentInfo" value="inSegmentInfo" index="inRouteSegmentInfoIndex">
                                                                                                        ${inSegmentInfo}
                                                                                                        <t:if test="inContinueRenderingArrow">
                                                                                                            <img src="${request.contextPath}/layout/images/arrowright.png" />
                                                                                                        </t:if>
                                                                                                    </t:loop>

                                                                                                </td>
                                                                                            </tr>
                                                                                        </table>
                                                                                        <center>
                                                                                            <a href="#inwindow${staticInWindowNumber}" onclick="Windows.windows[${inWindowNumber}].showCenter()">Show more details</a>
                                                                                        </center>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>

                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>
                                                                            <div t:id="inboundWindow">
                                                                                <!--${staticOutWindowNumber}-->

                                                                                <div class="rounded4" style="width:97%;">
                                                                                    <t:loop source="inSegments" value="inSegment" encoder="inSegmentsValueEncoder" index="inSegmentWindowIndex">
                                                                                        <center><b><br/>${inSegmentWindowDescription}</b></center>
                                                                                        <table class="rounded4">

                                                                                            <tr>
                                                                                                <th style="width:10%;">
                                                                                                    <label>Leaves</label>
                                                                                                </th>
                                                                                                <td class="rounded5">
                                                                                                    <table>
                                                                                                        <tr>
                                                                                                            <td>
                                                                                                                &nbsp;${inSegmentLeaveInfo}
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                        <tr>
                                                                                                            <td>
                                                                                                                &nbsp;${inSegmentLeaveHourInfo}
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                    </table>

                                                                                                </td>
                                                                                            </tr>

                                                                                            <t:if test="outSegmentHasStops">
                                                                                                <tr>
                                                                                                    <th style="width:10%;">
                                                                                                        <label>Stops</label>
                                                                                                    </th>
                                                                                                    <td class="rounded5">
                                                                                                        ${inSegmentStopInfo}
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </t:if>

                                                                                            <tr>
                                                                                                <th style="width:10%;">
                                                                                                    <label>Arrives</label>
                                                                                                </th>
                                                                                                <td class="rounded5">
                                                                                                    <table>
                                                                                                        <tr>
                                                                                                            <td>
                                                                                                                &nbsp;${inSegmentArriveInfo}
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                        <tr>
                                                                                                            <td>
                                                                                                                &nbsp;${inSegmentArriveHourInfo}
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                    </table>

                                                                                                </td>
                                                                                            </tr>

                                                                                            <tr>
                                                                                                <th style="width:10%;">
                                                                                                    <label>Duration</label>
                                                                                                </th>
                                                                                                <td class="rounded5">
                                                                                                    ${inSegmentDurationInfo}<br/>
                                                                                                </td>
                                                                                            </tr>

                                                                                        </table>
                                                                                        <t:if test="isThereNextInSegment">
                                                                                            <table class="rounded4">
                                                                                                <tr>

                                                                                                    <td class="rounded5">
                                                                                                        <center>

                                                                                                            ${inSegmentWaitDesc}
                                                                                                        </center>

                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>
                                                                                        </t:if>
                                                                                    </t:loop>

                                                                                    <table class="rounded4">
                                                                                        <tr>
                                                                                            <th style="width:50%;" align="right">
                                                                                                <label>Total duration:</label>
                                                                                            </th>
                                                                                            <td>
                                                                                                ${inRouteDurationInfo}
                                                                                            </td>
                                                                                        </tr>
                                                                                    </table>

                                                                                    <center>
                                                                                        <br/>
                                                                                        <t:actionlink t:id="inviewmap" context="inRouteSegmentInfoCommas" target="_blank">View inbound route in a map</t:actionlink>
                                                                                    </center>
                                                                                </div>

                                                                            </div>

                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                                <!--<t:actionlink t:id="viewReturn" context="flight.id">Visualize return</t:actionlink><br/>
                                                                -->
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </t:loop>
                                                <table align="right">
                                                    <tr>
                                                        <td align="right">
                                                            <table>
                                                                <tr>
                                                                    <td>
                                                                        <table class="buytable">
                                                                            <tr>
                                                                                <td class="buytdcenter" >
                                                                                    <center>
                                                                                        <div class="form-submit">
                                                                                            <input type="submit" t:type="submit" value="Buy" t:id="buy" t:event="buy" class="buybutton"/>&nbsp;

                                                                                        </div>
                                                                                    </center>
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                    </td>
                                                                    <td>
                                                                        <table class="pricetable">
                                                                            <tr>
                                                                                <td class="pricetdcenter" >
                                                                                    <center>${flightPrice}</center>
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </t:radiogroup>
                                        </form>
                                    </td>
                                </tr>

                            </table>
                            <p:else>
                                <table>
                                    <tr>
                                        <td>
                                            We are sorry, but your search returned no results.
                                        </td>
                                    </tr>
                                </table>
                            </p:else>
                        </t:if>

                    </div>

                    <br/>
                    <div id="non-printable">
                        <input type="button"
                          onClick="window.print()"
                          value="Print This Page"/>
                    </div>
                </td>

                <td valign="top" style="width:30%" class="showtd">
                    <!-- empty space for now -->
                </td>
            </tr>
        </table>
        <p:else>
            <p>To view results, you must first make a search on the <t:pagelink page="SearchPage">search page.</t:pagelink></p>
        </p:else>
    </t:if>

</html>