<html t:type="layout" title="Search results"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">

    <table class="full">
        <tr>
            <td valign="top" style="width:20%; border-style:solid; border-width:1px;">
            </td>
            <td valign="top" style="width:80%; border-style:solid; border-width:1px;">
                <table class="full" style="width:100%">
                    <t:if test="search">
                        <tr>
                            <td>${searchDescription}</td>
                        </tr>
                        <tr>
                            <td>${resultDescription}</td>
                        </tr>
                        <p:else>
                            <tr>
                                <td>To view results, you must first make a search on the <t:pagelink page="SearchPage">search page.</t:pagelink></td>
                            </tr>
                        </p:else>
                    </t:if>

                </table>

                <table>
                    <a t:id="customPagedLoop" source="flights" value="flight" rowsPerPage="rowsPerPage" pagerPosition="bottom">
                        <tr height="10">&nbsp;</tr>
                        <t:if test="!emptyResult">
                            <tr>
                                <td style="border-style:solid; border-width:1px;">

                                    ${flightDescription}<br/>

                                    <t:loop source="outRoutes" value="outboundRoute">
                                        <table>
                                            <tr>
                                                <td style="border-style:solid; border-width:1px;">
                                                    <table>
                                                        <tr>
                                                            <td style="border-style:solid; border-width:1px;">
                                                                <center>
                                                                    <img src="${request.contextPath}/layout/images/going.png" />
                                                                </center>
                                                            </td>
                                                            <td style="border-style:solid; border-width:1px;">
                                                                <label class="routelabel">Going</label>
                                                            </td>
                                                        </tr>
                                                    </table>



                                                    <table>
                                                        <tr>
                                                            <td style="border-style:solid; border-width:1px;">
                                                                <table>
                                                                    <tr>
                                                                        <th style="width:10%;">
                                                                            <label>Schedule</label>
                                                                        </th>
                                                                        <td style="border-style:solid; border-width:1px;">
                                                                            ${outRouteScheduleInfo}<br/>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <th style="width:10%;">
                                                                            <label>Duration</label>
                                                                        </th>
                                                                        <td style="border-style:solid; border-width:1px;">
                                                                            ${outRouteDurationInfo}<br/>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <th style="width:10%;">
                                                                            <label>Description</label>
                                                                        </th>
                                                                        <td style="border-style:solid; border-width:1px;">
                                                                            ${outRouteInfo}<br/>
                                                                        </td>
                                                                    </tr>

                                                                    <tr>
                                                                        <th style="width:10%;">
                                                                            <label>Segments</label>
                                                                        </th>
                                                                        <td style="border-style:solid; border-width:1px;">
                                                                            ${outRouteSegmentInfo}<br/>
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="border-style:solid; border-width:1px;">
                                                                <t:loop source="outSegments" value="outSegment">
                                                                    ${outSegmentInfo}<br/>
                                                                </t:loop>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <!--<t:actionlink t:id="viewDepart" context="flight.id">Visualize departure</t:actionlink><br/>
                                                    -->
                                                </td>
                                            </tr>
                                        </table>
                                    </t:loop>

                                    <t:loop source="inRoutes" value="inboundRoute">
                                        <table>
                                            <tr>
                                                <td style="border-style:solid; border-width:1px;">
                                                    <table>
                                                        <tr>
                                                            <td style="border-style:solid; border-width:1px;">
                                                                <center>
                                                                    <img src="${request.contextPath}/layout/images/returning.png" />
                                                                </center>
                                                            </td>
                                                            <td style="border-style:solid; border-width:1px;">
                                                                <label class="routelabel">Returning</label>
                                                            </td>
                                                        </tr>
                                                    </table>

                                                    <table>
                                                        <tr>
                                                            <td style="border-style:solid; border-width:1px;">
                                                                <table>
                                                                    <tr>
                                                                        <th style="width:10%;">
                                                                            <label>Schedule</label>
                                                                        </th>
                                                                        <td style="border-style:solid; border-width:1px;">
                                                                            ${inRouteScheduleInfo}<br/>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <th style="width:10%;">
                                                                            <label>Duration</label>
                                                                        </th>
                                                                        <td style="border-style:solid; border-width:1px;">
                                                                            ${inRouteDurationInfo}<br/>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <th style="width:10%;">
                                                                            <label>Description</label>
                                                                        </th>
                                                                        <td style="border-style:solid; border-width:1px;">
                                                                            ${inRouteInfo}<br/>
                                                                        </td>
                                                                    </tr>

                                                                    <tr>
                                                                        <th style="width:10%;">
                                                                            <label>Segments</label>
                                                                        </th>
                                                                        <td style="border-style:solid; border-width:1px;">
                                                                            ${inRouteSegmentInfo}<br/>
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="border-style:solid; border-width:1px;">
                                                                <t:loop source="inSegments" value="inSegment">
                                                                    ${inSegmentInfo}<br/>
                                                                </t:loop>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <!--<t:actionlink t:id="viewReturn" context="flight.id">Visualize return</t:actionlink><br/>
                                                    -->
                                                </td>
                                            </tr>
                                        </table>
                                    </t:loop>
                                </td>
                            </tr>
                            <tr>
                                <td align="right" style="border-style:solid; border-width:1px;">
                                    <table class="pricetable">
                                        <tr>
                                            <td class="pricetdcenter" >
                                                <center>${flightPrice}</center>
                                            </td>
                                        </tr>
                                    </table>

                                </td>
                            </tr>
                            <p:else>
                                <tr>
                                    <td>
                                        <p>We are sorry, but your search returned no results.</p>
                                    </td>
                                </tr>
                            </p:else>
                        </t:if>
                    </a>
                </table>
                <div id="non-printable">
                    <input type="button"
                      onClick="window.print()"
                      value="Print This Page"/>
                </div>
            </td>

            <td valign="top" style="width:0%">
                <p>${visualizingFlight}</p>
                <!--
                <div t:type="gmap" lng="lngin" lat="latin" coordlist="coordinatesParameter" style="width:100%; height:500px;"/>
                <div id="plotterError" style="display:none;">
                    There was an error loading the Google Map.
                </div>        -->
            </td>
        </tr>
    </table>



</html>